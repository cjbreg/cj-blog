<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Redirecting...</title>
    <script>
      // Single Page App redirect for GitHub Pages
      // Converts /cj-blog/posts/my-slug into /cj-blog/?p=/posts/my-slug
      const basePath = '/cj-blog';
      const fullPath = window.location.pathname;
      // Remove base path to get the route path
      const routePath = fullPath.startsWith(basePath) 
        ? fullPath.slice(basePath.length) || '/'
        : fullPath;
      const pathWithQuery = routePath + window.location.search + window.location.hash;
      window.location.replace(window.location.origin + basePath + '/?p=' + encodeURIComponent(pathWithQuery));
    </script>
  </head>
  <body>
    Redirecting...
  </body>
</html>